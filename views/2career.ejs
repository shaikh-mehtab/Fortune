<%var webCareer=webCareer[0] %>



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



    <style>
        .contact-form-style-03 {
            background-color: rgb(22, 21, 21);
            padding: 20px;
        }

        ::placeholder {
            color: white;
        }
    </style>
    <%- include('include/head') %>

        <body class="custom-cursor overflow-x-hidden" data-mobile-nav-style="classic">
            <div class="cursor-page-inner">
                <div class="circle-cursor circle-cursor-inner"></div>
                <div class="circle-cursor circle-cursor-outer"></div>
            </div>
            <%- include('include/header') %>
                <section
                    class="ipad-top-space-margin page-title-big-typography cover-background background-position-center-bottom p-0 bg-dark-gray"
                    style="background-image: url('<%if(webCareer.cover_url) {%><%= API_IMG + JSON.parse(webCareer.cover_url) %><%} %>')
        ">
                    <div class="container">
                        <div
                            class="row align-items-end justify-content-center one-half-screen md-small-screen sm-extra-small-screen pb-9">
                            <div class="col-lg-6 col-md-8 position-relative page-title-extra-small text-center"
                                data-anime='{ "el": "childs", "translateY": [30, 0], "opacity": [0,1], "duration": 600, "delay": 0, "staggervalue": 300, "easing": "easeOutQuad" }'>
                                <h1 class="mb-20px alt-font text-white fw-500 ls-minus-4px"><span
                                        class="text-base-color">Career</span></h1>
                                <h2 class="text-white mb-0 text-uppercase ls-3px fw-600">
                                    <%= webCareer.breadcrumb_name %>
                                </h2>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="bg-dark-gray background-position-center-top"
                    style="background-image: url('images/demo-architecture-dotted-pattern.svg');">

                    <div class="container"
                        data-anime='{ "el": "childs", "translateY": [30, 0], "opacity": [0,1], "duration": 600, "delay": 0, "staggervalue": 300, "easing": "easeOutQuad" }'>
                        <h4 class="text-center text-base-color">
                            <%= webCareer.title %>
                        </h4>

                        <p class="text-center px-5 py-3 text-white ">
                            <%= webCareer.description %>
                        </p>

                        <% if (careers.length> 0) { %>
                            <% let counter=1; %>
                                <% careers.forEach(function (career) { %>
                                    <div class="row mb-11 p-3">
                                        <div class="col text-left">
                                            <h4 class="text-white ">
                                                <%= counter %><span>.</span>
                                            </h4>
                                            <h4 class="text-white fw-600">
                                                <%= career.title %>
                                            </h4>
                                            <h4 class="upper">
                                                <%= career.location %>
                                            </h4>
                                            <button
                                                class="btn btn-small btn-base-color btn-box-shadow btn-round-edge-small primary-font fw-700 submit"
                                                type="submit" data-bs-target="#exampleModal<%= counter %>"
                                                data-bs-toggle="modal" id="submitbtn">
                                                Apply Here
                                            </button>
                                        </div>
                                        <div class="col order-5">
                                            <h6 class="text-white fw-600 ">Description.</h6>
                                            <p class="w-90 md-w-100 text-left">
                                                <%= career.description %>
                                            </p>
                                        </div>
                                        <div class="col order-5">
                                            <h6 class="text-white fw-600 text-center">Experience</h6>
                                            <h6 class="w-90 md-w-100 text-center">
                                                <%= career.experience %> <span>+years</span>
                                            </h6>
                                        </div>
                                        <div class="modal fade" id="exampleModal<%= counter %>" tabindex="-1"
                                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-xl">

                                                <form action="/api/createapplicant" enctype="multipart/form-data"
                                                    id="frmCareer<%= counter %>" method="post"
                                                    class="contact-form-style-03 frmCareer">

                                                    <div class="modal-content bg-black text-white">
                                                        <div class="modal-header">
                                                            <div class="row justify-content-center">
                                                                <h4 class="fw-600 text-center mb-0"><span
                                                                        class="text-base-color">Career Form</span></h4>
                                                            </div>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row justify-content-center">
                                                                <div class="col-md-6">
                                                                    <label for="inputName"
                                                                        class="form-label fs-11 ls-2px text-uppercase mb-0">Your
                                                                        Name</label>
                                                                    <div class="position-relative form-group mb-30px">
                                                                        <span class="form-icon"><i
                                                                                class="bi bi-emoji-smile"></i></span>
                                                                        <input
                                                                            class="fs-15 ps-0 border-radius-0px bg-black form-control"
                                                                            id="inputName" type="text" name="name"
                                                                            placeholder="Enter Name" />
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label for="inputEmail"
                                                                        class="form-label fs-11 ls-2px text-uppercase mb-0">Your
                                                                        email address*</label>
                                                                    <div class="position-relative form-group mb-30px">
                                                                        <span class="form-icon"><i
                                                                                class="bi bi-envelope"></i></span>
                                                                        <input
                                                                            class="fs-15 ps-0 border-radius-0px bg-black form-control"
                                                                            id="inputEmail" type="email" name="email"
                                                                            placeholder="Enter Email" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <label for="inputCity"
                                                                        class="form-label fs-11 ls-2px text-uppercase mb-0">Your
                                                                        phone number</label>
                                                                    <div class="position-relative form-group mb-30px">
                                                                        <span class="form-icon"><i
                                                                                class="bi-geo-alt-fill"></i></span>
                                                                        <input
                                                                            class="fs-15 ps-0 border-radius-0px bg-black form-control"
                                                                            id="inputNumber" type="tel" name="phone_no"
                                                                            placeholder="Enter Phone Number " />
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label for="inputCity"
                                                                        class="form-label fs-11 ls-2px text-uppercase mb-0">Your
                                                                        City</label>
                                                                    <div class="position-relative form-group mb-30px">
                                                                        <span class="form-icon"><i
                                                                                class="bi-geo-alt-fill"></i></span>
                                                                        <input
                                                                            class="fs-15 ps-0 border-radius-0px bg-black form-control"
                                                                            id="inputCity" type="text" name="city"
                                                                            placeholder="Enter City" />
                                                                    </div>
                                                                </div>

                                                                <div class="col-12 mb-5">
                                                                    <label for="inputMessage"
                                                                        class="form-label fs-11 ls-2px text-uppercase mb-0">Your
                                                                        message</label>
                                                                    <div
                                                                        class="position-relative form-group form-textarea mb-0">
                                                                        <textarea
                                                                            class="fs-15 ps-0 border-radius-0px bg-black form-control"
                                                                            id="inputMessage" name="message"
                                                                            placeholder="Enter Message"
                                                                            rows="4"></textarea>
                                                                        <span class="form-icon"><i
                                                                                class="bi bi-chat-square-dots"></i></span>
                                                                    </div>
                                                                </div>

                                                                <div class="col-12 mb-5">
                                                                    <label for="formFile"
                                                                        class="form-label fs-11 ls-2px text-uppercase mb-0">Upload
                                                                        Your CV Here*</label>
                                                                    <div class="position-relative form-group mb-0">
                                                                        <input type="file" id="files" name="resume"
                                                                            accept=".png, .pdf, .doc, .docx" required>
                                                                        <span class="form-icon"><i
                                                                                class="bi bi-file-person"></i></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button
                                                                class="btn btn-small bg-dark-gray text-white btn-box-shadow btn-round-edge-small primary-font fw-700 submit"
                                                                type="button" data-bs-dismiss="modal">Close</button>
                                                            <div>
                                                                <input id="job_id " type="hidden" name="job_id"
                                                                    value="<%= counter %>" />

                                                                <input id="applicant_status" type="hidden"
                                                                    name="applicant_status" value="1" />
                                                                <input id="position" type="hidden" name="position"
                                                                    value="1" />
                                                                <button
                                                                    class="btn btn-small btn-base-color btn-box-shadow btn-round-edge-small primary-font fw-700 submit"
                                                                    data-counter="<%= counter %>" id="submitBtn"
                                                                    type="submit">
                                                                    Send message
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <% counter++; %>
                                        <% }); %>
                                            <% } %>
                    </div>
                </section>
                <%- include('include/footer') %>

        </body>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('[id^="submitBtn"]').forEach(function (button) {
                    button.addEventListener('click', function (event) {
                        event.preventDefault();

                        const form = document.getElementById('frmCareer' + button.getAttribute('data-counter'));
                        const inputs = form.querySelectorAll('input[required], textarea[required]');

                        let allFieldsFilled = true;
                        inputs.forEach(input => {
                            if (!input.value) {
                                allFieldsFilled = false;
                            }
                        });

                        if (!allFieldsFilled) {
                            Swal.fire({
                                title: "Error!",
                                text: "All Fields Are Required.",
                                icon: "error",
                                confirmButtonText: "OK"
                            });
                            return;
                        }

                        setTimeout(function () {
                            Swal.fire({
                                position: "middle",
                                icon: "success",
                                title: "Thanks! Your form has been accepted.",
                                showConfirmButton: false,
                                timer: 1700
                            }).then(() => {
                                $('#exampleModal' + button.getAttribute('data-counter')).modal('hide');
                            });
                        }, 500);
                    });
                });
            });
        </script>